<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Software documentation - API: qbmove_communications.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_CP.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Software documentation - API
   </div>
   <div id="projectbrief">Centro E.Piaggio</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">qbmove_communications.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Library of functions for SERIAL PORT communication with a board. Function Prototypes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;termios.h&gt;</code><br />
<code>#include &quot;<a class="el" href="commands_8h_source.html">commands.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for qbmove_communications.h:</div>
<div class="dyncontent">
<div class="center"><img src="qbmove__communications_8h__incl.png" border="0" usemap="#qbmove__communications_8h" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="qbmove__communications_8h__dep__incl.png" border="0" usemap="#qbmove__communications_8hdep" alt=""/></div>
<!-- MAP 1 -->
</div>
</div>
<p><a href="qbmove__communications_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcomm__settings.html">comm_settings</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a5fdc7facea201bfce4ad308105f88d0c"><td class="memItemLeft" align="right" valign="top"><a id="a5fdc7facea201bfce4ad308105f88d0c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>INVALID_HANDLE_VALUE</b>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:a5fdc7facea201bfce4ad308105f88d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44483e681594d0e510fd59c2b4b09ed9"><td class="memItemLeft" align="right" valign="top"><a id="a44483e681594d0e510fd59c2b4b09ed9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BAUD_RATE_T_2000000</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a44483e681594d0e510fd59c2b4b09ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2c3e3edb0886633d686996e2f8c48e6"><td class="memItemLeft" align="right" valign="top"><a id="ad2c3e3edb0886633d686996e2f8c48e6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BAUD_RATE_T_460800</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ad2c3e3edb0886633d686996e2f8c48e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b4465b1096182b9ebb03e87d572c59"><td class="memItemLeft" align="right" valign="top"><a id="ab5b4465b1096182b9ebb03e87d572c59"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MAX_WATCHDOG_TIME</b>&#160;&#160;&#160;500</td></tr>
<tr class="separator:ab5b4465b1096182b9ebb03e87d572c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e13c9ac88403c42395bb0af487eb2d"><td class="memItemLeft" align="right" valign="top"><a id="a18e13c9ac88403c42395bb0af487eb2d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>READ_TIMEOUT</b>&#160;&#160;&#160;4000</td></tr>
<tr class="separator:a18e13c9ac88403c42395bb0af487eb2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a069bb8cb95b0528d5ce0304bb5561a40"><td class="memItemLeft" align="right" valign="top"><a id="a069bb8cb95b0528d5ce0304bb5561a40"></a>
typedef int&#160;</td><td class="memItemRight" valign="bottom"><b>HANDLE</b></td></tr>
<tr class="separator:a069bb8cb95b0528d5ce0304bb5561a40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a4b9cd04b7bc0361256581b13fadbdc"><td class="memItemLeft" align="right" valign="top"><a id="a4a4b9cd04b7bc0361256581b13fadbdc"></a>
typedef struct <a class="el" href="structcomm__settings.html">comm_settings</a>&#160;</td><td class="memItemRight" valign="bottom"><b>comm_settings</b></td></tr>
<tr class="separator:a4a4b9cd04b7bc0361256581b13fadbdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Virtual COM (RS485) functions</div></td></tr>
<tr class="memitem:a7c103994cbd730d3e8fc84328ee09fd5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a7c103994cbd730d3e8fc84328ee09fd5">RS485listPorts</a> (char list_of_ports[60][255])</td></tr>
<tr class="separator:a7c103994cbd730d3e8fc84328ee09fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adce66aac7dbbd52de59bb7a3a9c1b3bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, const char *port_s, int BAUD_RATE=B2000000)</td></tr>
<tr class="separator:adce66aac7dbbd52de59bb7a3a9c1b3bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f87643fab51e02e4eab71bf4ab1a33a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t)</td></tr>
<tr class="separator:a5f87643fab51e02e4eab71bf4ab1a33a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c7444a05d655538cb7d13ee47290c8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a8c7444a05d655538cb7d13ee47290c8d">RS485read</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char *package)</td></tr>
<tr class="separator:a8c7444a05d655538cb7d13ee47290c8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bf8448818684348d30d03d59fc2c1b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af5bf8448818684348d30d03d59fc2c1b">RS485ListDevices</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, char list_of_ids[255])</td></tr>
<tr class="separator:af5bf8448818684348d30d03d59fc2c1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65b0719c48b487b5e7432f794e3fec1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a65b0719c48b487b5e7432f794e3fec1b">RS485GetInfo</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, char *buffer)</td></tr>
<tr class="separator:a65b0719c48b487b5e7432f794e3fec1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">qbAPI Commands</div></td></tr>
<tr class="memitem:a7f95a0e23b674b1fe32b8e35f0e36863"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a7f95a0e23b674b1fe32b8e35f0e36863">commPing</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:a7f95a0e23b674b1fe32b8e35f0e36863"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff081c6687d87e38cddfe714ad2de0fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aff081c6687d87e38cddfe714ad2de0fd">commActivate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char activate)</td></tr>
<tr class="separator:aff081c6687d87e38cddfe714ad2de0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff7ead4f05a1c0bba5610fe226d0ce0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a8ff7ead4f05a1c0bba5610fe226d0ce0">commSetBaudRate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int baudrate)</td></tr>
<tr class="separator:a8ff7ead4f05a1c0bba5610fe226d0ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69b4f92e4ef6b8cfef5d0c34fd4993db"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a69b4f92e4ef6b8cfef5d0c34fd4993db">commSetWatchDog</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int wdt)</td></tr>
<tr class="separator:a69b4f92e4ef6b8cfef5d0c34fd4993db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894f6f9ec9822112ff3c7eef10d123c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a894f6f9ec9822112ff3c7eef10d123c9">commSetInputs</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int inputs[])</td></tr>
<tr class="separator:a894f6f9ec9822112ff3c7eef10d123c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3aee192f28b08cf6d80fc719e73ad46"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aa3aee192f28b08cf6d80fc719e73ad46">commSetPosStiff</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int inputs[])</td></tr>
<tr class="separator:aa3aee192f28b08cf6d80fc719e73ad46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0a38427212fc15a1021d2459a86f2c0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ae0a38427212fc15a1021d2459a86f2c0">commGetInputs</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int inputs[2])</td></tr>
<tr class="separator:ae0a38427212fc15a1021d2459a86f2c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a73f0c93c7ae12a95541c1feee10b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a06a73f0c93c7ae12a95541c1feee10b7">commGetMeasurements</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int measurements[3])</td></tr>
<tr class="separator:a06a73f0c93c7ae12a95541c1feee10b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab579187b08cac507c18584b242eb02d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aab579187b08cac507c18584b242eb02d">commGetCounters</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short unsigned int counters[20])</td></tr>
<tr class="separator:aab579187b08cac507c18584b242eb02d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b3c724150046fc4a766db52fa086fdf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a4b3c724150046fc4a766db52fa086fdf">commGetCurrents</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int currents[2])</td></tr>
<tr class="separator:a4b3c724150046fc4a766db52fa086fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f700c3fc90215428707c7c98b3d538f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a3f700c3fc90215428707c7c98b3d538f">commGetCurrAndMeas</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int *values)</td></tr>
<tr class="separator:a3f700c3fc90215428707c7c98b3d538f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a731e861c53a68c7e2e57d36383bf3360"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a731e861c53a68c7e2e57d36383bf3360">commGetEmg</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int emg[2])</td></tr>
<tr class="separator:a731e861c53a68c7e2e57d36383bf3360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55b8ff44432552b9e5a7cd092b8b429"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af55b8ff44432552b9e5a7cd092b8b429">commGetVelocities</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int measurements[])</td></tr>
<tr class="separator:af55b8ff44432552b9e5a7cd092b8b429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfa23acd4ac72099fa96a32df01969d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#abfa23acd4ac72099fa96a32df01969d2">commGetAccelerations</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int measurements[])</td></tr>
<tr class="separator:abfa23acd4ac72099fa96a32df01969d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaec903aef1ce3cebb5f42f63995c2e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#abaec903aef1ce3cebb5f42f63995c2e1">commGetActivate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char *activate)</td></tr>
<tr class="separator:abaec903aef1ce3cebb5f42f63995c2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a052291b3dd75dee6a33242268a1de657"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a052291b3dd75dee6a33242268a1de657">commGetInfo</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int info_type, char *info)</td></tr>
<tr class="separator:a052291b3dd75dee6a33242268a1de657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70990e1cf4d18b3baeb3c7295dbd6426"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a70990e1cf4d18b3baeb3c7295dbd6426">commBootloader</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:a70990e1cf4d18b3baeb3c7295dbd6426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92ef5f590c59ab49a224b8e612eb08ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a92ef5f590c59ab49a224b8e612eb08ac">commCalibrate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:a92ef5f590c59ab49a224b8e612eb08ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fc8ebaa05ea9d3ff895088c30103d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ac3fc8ebaa05ea9d3ff895088c30103d5">commHandCalibrate</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int speed, short int repetitions)</td></tr>
<tr class="separator:ac3fc8ebaa05ea9d3ff895088c30103d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">qbAPI Parameters</div></td></tr>
<tr class="memitem:a95fbe9919cbe89dc444e333edad6642e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a95fbe9919cbe89dc444e333edad6642e">commSetZeros</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, void *values, unsigned short num_of_values)</td></tr>
<tr class="separator:a95fbe9919cbe89dc444e333edad6642e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47b8ee2e1aeab529bc3da3bfd52d3f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ab47b8ee2e1aeab529bc3da3bfd52d3f6">commGetParamList</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, unsigned short index, void *values, unsigned short value_size, unsigned short num_of_values, uint8_t *buffer)</td></tr>
<tr class="separator:ab47b8ee2e1aeab529bc3da3bfd52d3f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3359fdac0ba857804dfc4a9bc761b20"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ad3359fdac0ba857804dfc4a9bc761b20">commStoreParams</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:ad3359fdac0ba857804dfc4a9bc761b20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af49ed4d474529ec3a53e37f5f85c1e7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af49ed4d474529ec3a53e37f5f85c1e7b">commStoreDefaultParams</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:af49ed4d474529ec3a53e37f5f85c1e7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af60062569bcd25b6f2fc19ba378d583c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af60062569bcd25b6f2fc19ba378d583c">commRestoreParams</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:af60062569bcd25b6f2fc19ba378d583c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3771c9c4be2805d66c5b1a59066cb19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#aa3771c9c4be2805d66c5b1a59066cb19">commInitMem</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id)</td></tr>
<tr class="separator:aa3771c9c4be2805d66c5b1a59066cb19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">General Functions</div></td></tr>
<tr class="memitem:a97912dd3b3c6529884b0e61a2ca6a31b"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a97912dd3b3c6529884b0e61a2ca6a31b">timevaldiff</a> (struct timeval *starttime, struct timeval *finishtime)</td></tr>
<tr class="separator:a97912dd3b3c6529884b0e61a2ca6a31b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35819265b74001583803a2295b3236dc"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a35819265b74001583803a2295b3236dc">checksum</a> (char *data_buffer, int data_length)</td></tr>
<tr class="separator:a35819265b74001583803a2295b3236dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Functions for other devices</div></td></tr>
<tr class="memitem:ac9705be6201442447bfa37e498721d2b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#ac9705be6201442447bfa37e498721d2b">commExtDrive</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, char ext_input)</td></tr>
<tr class="separator:ac9705be6201442447bfa37e498721d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a342c0b970a9a2a661c3d5636a7601a01"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#a342c0b970a9a2a661c3d5636a7601a01">commSetCuffInputs</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, int flag)</td></tr>
<tr class="separator:a342c0b970a9a2a661c3d5636a7601a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af78c08053431bb4d516f9ec49b651280"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="qbmove__communications_8h.html#af78c08053431bb4d516f9ec49b651280">commGetJoystick</a> (<a class="el" href="structcomm__settings.html">comm_settings</a> *comm_settings_t, int id, short int joystick[2])</td></tr>
<tr class="separator:af78c08053431bb4d516f9ec49b651280"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Library of functions for SERIAL PORT communication with a board. Function Prototypes. </p>
<dl class="section date"><dt>Date</dt><dd>March 19th, 2020 </dd></dl>
<dl class="section author"><dt>Author</dt><dd><em>Centro "E.Piaggio"</em> </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>(C) 2012-2016 qbrobotics. All rights reserved. </dd>
<dd>
(C) 2017-2019 Centro "E.Piaggio". All rights reserved.</dd></dl>
<p>This library contains all necessary functions for communicating with a board when using a USB to RS485 connector that provides a Virtual COM interface. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a35819265b74001583803a2295b3236dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35819265b74001583803a2295b3236dc">&#9670;&nbsp;</a></span>checksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char checksum </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions returns an 8 bit LCR checksum over the lenght of a buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_buffer</td><td>Buffer. </td></tr>
    <tr><td class="paramname">data_length</td><td>Buffer length.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">char</span>    aux;</div><div class="line"><span class="keywordtype">char</span>    buffer[5];</div><div class="line"></div><div class="line">buffer  = <span class="stringliteral">&quot;abcde&quot;</span>;</div><div class="line">aux     = <a class="code" href="qbmove__communications_8h.html#a35819265b74001583803a2295b3236dc">checksum</a>(buffer,5);</div><div class="line">printf(<span class="stringliteral">&quot;Checksum: %d&quot;</span>, (<span class="keywordtype">int</span>) aux)</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a5f87643fab51e02e4eab71bf4ab1a33a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f87643fab51e02e4eab71bf4ab1a33a">&#9670;&nbsp;</a></span>closeRS485()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void closeRS485 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to close a serial port being used with the board.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aff081c6687d87e38cddfe714ad2de0fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff081c6687d87e38cddfe714ad2de0fd">&#9670;&nbsp;</a></span>commActivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commActivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>activate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function activates or deactivates a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">activate</td><td>TRUE to turn motors on. FALSE to turn motors off. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#aff081c6687d87e38cddfe714ad2de0fd">commActivate</a>(&amp;comm_settings_t, device_id, TRUE);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a70990e1cf4d18b3baeb3c7295dbd6426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70990e1cf4d18b3baeb3c7295dbd6426">&#9670;&nbsp;</a></span>commBootloader()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commBootloader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sends the board in bootloader modality in order to update the firmware on the board</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return 0 on success, -1 otherwise</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a70990e1cf4d18b3baeb3c7295dbd6426">commBootloader</a>(&amp;comm_settings_t, device_id);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a92ef5f590c59ab49a224b8e612eb08ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92ef5f590c59ab49a224b8e612eb08ac">&#9670;&nbsp;</a></span>commCalibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commCalibrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to calibrate the maximum stiffness value of the board</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 on success, -1 otherwise</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a92ef5f590c59ab49a224b8e612eb08ac">commCalibrate</a>(&amp;comm_settings_t, device_id);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ac9705be6201442447bfa37e498721d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9705be6201442447bfa37e498721d2b">&#9670;&nbsp;</a></span>commExtDrive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commExtDrive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>ext_input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used with the armslider device. Is used to drive another board with the inputs of the first one</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the comunication settings. </td></tr>
    <tr><td class="paramname">id</td><td>The id of the board drive. </td></tr>
    <tr><td class="paramname">ext_input</td><td>A flag used to activate the external drive functionality of the board.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A negative value if something went wrong, a zero if everything went fine. </dd></dl>

</div>
</div>
<a id="abfa23acd4ac72099fa96a32df01969d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfa23acd4ac72099fa96a32df01969d2">&#9670;&nbsp;</a></span>commGetAccelerations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetAccelerations </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>measurements</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the acceleration of the qbHand motor</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">measurements</td><td>Velocity measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>              device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>        acc_measurements[3];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#abfa23acd4ac72099fa96a32df01969d2">commGetAccelerations</a>(&amp;comm_settings_t, device_id, acc_measurements))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>, acc_measurements[0], acc_measurements[1], acc_measurements[2]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve accelerations.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="abaec903aef1ce3cebb5f42f63995c2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaec903aef1ce3cebb5f42f63995c2e1">&#9670;&nbsp;</a></span>commGetActivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetActivate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>activate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets the activation status of a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">activation</td><td>Activation status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"><span class="keywordtype">char</span>    activation_status;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#abaec903aef1ce3cebb5f42f63995c2e1">commGetActivate</a>(&amp;comm_settings_t, DEVICE_ID, activation_status))</div><div class="line">    printf(<span class="stringliteral">&quot;Activation status: %d\n&quot;</span>, &amp;activation_status);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve activation status.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aab579187b08cac507c18584b242eb02d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab579187b08cac507c18584b242eb02d">&#9670;&nbsp;</a></span>commGetCounters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetCounters </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short unsigned int&#160;</td>
          <td class="paramname"><em>counters</em>[20]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets counters values from a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">counters</td><td>Counters</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>       comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>                 device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>  counters[20];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#aab579187b08cac507c18584b242eb02d">commGetCounters</a>(&amp;comm_settings_t, DEVICE_ID, counters))</div><div class="line">    printf(<span class="stringliteral">&quot;Counters: %d\t%d\t {...} %d\n&quot;</span>, counters[0], counters[1], {...}, counters[20]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve counters.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a3f700c3fc90215428707c7c98b3d538f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f700c3fc90215428707c7c98b3d538f">&#9670;&nbsp;</a></span>commGetCurrAndMeas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetCurrAndMeas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int *&#160;</td>
          <td class="paramname"><em>values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets currents and position measurements from a board connected to the serial port</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">values</td><td>Current and position measurements. Currents are in first two positions</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>              device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>        values[5];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"> <span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#a3f700c3fc90215428707c7c98b3d538f">commGetCurrAndMeas</a>(&amp;comm_settings_t, device_id, currents)){</div><div class="line">     printf(<span class="stringliteral">&quot;Currents: %d\t%d\t%d\n&quot;</span>,values[0], values[1]);</div><div class="line">     printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>, values[2], values[3], values[4]);</div><div class="line"> }</div><div class="line"> <span class="keywordflow">else</span></div><div class="line">     puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve currents.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a4b3c724150046fc4a766db52fa086fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b3c724150046fc4a766db52fa086fdf">&#9670;&nbsp;</a></span>commGetCurrents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetCurrents </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>currents</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets currents from a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">currents</td><td>Currents.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>              device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>        currents[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#a4b3c724150046fc4a766db52fa086fdf">commGetCurrents</a>(&amp;comm_settings_t, device_id, currents))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>,currents[0], currents[1]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve currents.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a731e861c53a68c7e2e57d36383bf3360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a731e861c53a68c7e2e57d36383bf3360">&#9670;&nbsp;</a></span>commGetEmg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetEmg </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>emg</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets measurements from electomyographics sensors connected to the qbHand. IS USED ONLY WHEN THE BOARD IS USED FOR A QBHAND</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">values</td><td>Emg sensors measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>              device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>        values[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#a731e861c53a68c7e2e57d36383bf3360">commGetEmg</a>(&amp;comm_settings_t, device_id, values));</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>, values[0], values[1]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve emg values.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a052291b3dd75dee6a33242268a1de657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a052291b3dd75dee6a33242268a1de657">&#9670;&nbsp;</a></span>commGetInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>info_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to ping the board and get information about the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">buffer</td><td>Buffer that stores a string with information about the device. BUFFER SIZE MUST BE AT LEAST 500. </td></tr>
    <tr><td class="paramname">info_type</td><td>Information to be retrieved.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">char</span>    auxstring[500];</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a052291b3dd75dee6a33242268a1de657">commGetInfo</a>(&amp;comm_settings_t, device_id, <a class="code" href="commands_8h.html#a2ba44fc5b8a316bd307d0baa9ab629ef">INFO_ALL</a>, auxstring);</div><div class="line">puts(auxstring);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ae0a38427212fc15a1021d2459a86f2c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0a38427212fc15a1021d2459a86f2c0">&#9670;&nbsp;</a></span>commGetInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetInputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>inputs</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets input references from a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">inputs</td><td>Input references.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       inputs[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#ae0a38427212fc15a1021d2459a86f2c0">commGetInputs</a>(&amp;comm_settings_t, DEVICE_ID, inputs))</div><div class="line">    printf(<span class="stringliteral">&quot;Inputs: %d\t%d\n&quot;</span>,inputs[0], inputs[1]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve device inputs.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af78c08053431bb4d516f9ec49b651280"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af78c08053431bb4d516f9ec49b651280">&#9670;&nbsp;</a></span>commGetJoystick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetJoystick </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>joystick</em>[2]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets joystick measurementes from a softhand connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">joystick</td><td>Joystick analog measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>              device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>        joystick[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#af78c08053431bb4d516f9ec49b651280">commGetJoystick</a>(&amp;comm_settings_t, device_id, joystick))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>,joystick[0], joystick[1]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve joystick measurements.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a06a73f0c93c7ae12a95541c1feee10b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06a73f0c93c7ae12a95541c1feee10b7">&#9670;&nbsp;</a></span>commGetMeasurements()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetMeasurements </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>measurements</em>[3]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets position measurements from a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">measurements</td><td>Measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       measurements[3];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#a06a73f0c93c7ae12a95541c1feee10b7">commGetMeasurements</a>(&amp;comm_settings_t, DEVICE_ID, measurements))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>,measurements[0], measurements[1], measurements[2]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve measurements.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ab47b8ee2e1aeab529bc3da3bfd52d3f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47b8ee2e1aeab529bc3da3bfd52d3f6">&#9670;&nbsp;</a></span>commGetParamList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetParamList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>value_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>num_of_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets all the parameters that are stored in the board memory and sets one of them if requested</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">index</td><td>The index relative to the parameter to be get. </td></tr>
    <tr><td class="paramname">values</td><td>An array with the parameter values. </td></tr>
    <tr><td class="paramname">value_size</td><td>The byte size of the parameter to be get </td></tr>
    <tr><td class="paramname">num_of_values</td><td>The size of the array of the parameter to be get </td></tr>
    <tr><td class="paramname">buffer</td><td>The array where the parameters' values and descriptions are saved</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   aux_string[2000];</div><div class="line"><span class="keywordtype">int</span>             index = 0;</div><div class="line"><span class="keywordtype">int</span>             value_size = 0;</div><div class="line"><span class="keywordtype">int</span>             num_of_values = 0;</div><div class="line"></div><div class="line"><span class="comment">// Get parameters</span></div><div class="line"><a class="code" href="qbmove__communications_8h.html#ab47b8ee2e1aeab529bc3da3bfd52d3f6">commGetParamList</a>(&amp;comm_settings_t, device_id, index, NULL, value_size, num_of_values, aux_string);</div><div class="line">string_unpacking_and_printing(aux_string);</div><div class="line"></div><div class="line"><span class="comment">// Set parameters</span></div><div class="line"></div><div class="line"><span class="keywordtype">float</span>           pid[3];</div><div class="line">pid[0] = 0.1;</div><div class="line">pid[1] = 0.2;</div><div class="line">pid[2] = 0.3;</div><div class="line">index = 2;</div><div class="line">value_size = 4;</div><div class="line">num_of_values = 3;</div><div class="line"><a class="code" href="qbmove__communications_8h.html#ab47b8ee2e1aeab529bc3da3bfd52d3f6">commGetParamList</a>(&amp;comm_settings_t, device_id, index, pid, value_size, num_of_values, NULL);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af55b8ff44432552b9e5a7cd092b8b429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af55b8ff44432552b9e5a7cd092b8b429">&#9670;&nbsp;</a></span>commGetVelocities()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commGetVelocities </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>measurements</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function gets velocities of the two motors and the shaft from a board connected to a serial port or from the only shaft of the qbHand</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">measurements</td><td>Velocity measurements.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>              device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>        vel_measurements[3];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span>(!<a class="code" href="qbmove__communications_8h.html#af55b8ff44432552b9e5a7cd092b8b429">commGetVelocities</a>(&amp;comm_settings_t, device_id, vel_measurements))</div><div class="line">    printf(<span class="stringliteral">&quot;Measurements: %d\t%d\t%d\n&quot;</span>, vel_measurements[0], vel_measurements[1], vel_measurements[2]);</div><div class="line"><span class="keywordflow">else</span></div><div class="line">    puts(<span class="stringliteral">&quot;Couldn&#39;t retrieve velocities.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ac3fc8ebaa05ea9d3ff895088c30103d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3fc8ebaa05ea9d3ff895088c30103d5">&#9670;&nbsp;</a></span>commHandCalibrate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commHandCalibrate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>repetitions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to make a series of opening and closures of the qbHand</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">speed</td><td>The speed of hand closure and opening [0 - 200] </td></tr>
    <tr><td class="paramname">repetitions</td><td>The nnumber of closures needed to be done [0 - 32767]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     speed = 200</div><div class="line"><span class="keywordtype">int</span>     repetitions = 400;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#ac3fc8ebaa05ea9d3ff895088c30103d5">commHandCalibrate</a>(&amp;comm_settings_t, device_id, speed, repetitions);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aa3771c9c4be2805d66c5b1a59066cb19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3771c9c4be2805d66c5b1a59066cb19">&#9670;&nbsp;</a></span>commInitMem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commInitMem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function initialize the EEPROM memory of the board by loading the default factory parameters. After the initialization a flag is set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#aa3771c9c4be2805d66c5b1a59066cb19">commInitMem</a>(&amp;comm_settings_t, device_id)</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a7f95a0e23b674b1fe32b8e35f0e36863"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f95a0e23b674b1fe32b8e35f0e36863">&#9670;&nbsp;</a></span>commPing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commPing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to ping the board.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">buffer</td><td>Buffer that stores a string with information about the device. BUFFER SIZE MUST BE AT LEAST 500.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 if ping was ok, -1 otherwise. </dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"> <a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"> <span class="keywordtype">int</span>             device_id = 65;</div><div class="line"></div><div class="line"> <a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"> <span class="keywordflow">if</span> ( <a class="code" href="qbmove__communications_8h.html#a7f95a0e23b674b1fe32b8e35f0e36863">commPing</a>(&amp;comm_settings_t, device_id) )</div><div class="line">     puts(<span class="stringliteral">&quot;Device exists.&quot;</span>);</div><div class="line"> <span class="keywordflow">else</span></div><div class="line">     puts(<span class="stringliteral">&quot;Device does not exist.&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af60062569bcd25b6f2fc19ba378d583c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af60062569bcd25b6f2fc19ba378d583c">&#9670;&nbsp;</a></span>commRestoreParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commRestoreParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function restores the factory default parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#af60062569bcd25b6f2fc19ba378d583c">commRestoreParams</a>(&amp;comm_settings_t, device_id)</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a8ff7ead4f05a1c0bba5610fe226d0ce0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ff7ead4f05a1c0bba5610fe226d0ce0">&#9670;&nbsp;</a></span>commSetBaudRate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commSetBaudRate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>baudrate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets the baudrate of communication.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">baudrate</td><td>BaudRate requested 0 = 2M baudrate, 1 = 460.8k baudrate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       baudrate = 0;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a8ff7ead4f05a1c0bba5610fe226d0ce0">commSetBaudRate</a>(&amp;comm_settings_t, global_args.device_id, baudrate);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a342c0b970a9a2a661c3d5636a7601a01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a342c0b970a9a2a661c3d5636a7601a01">&#9670;&nbsp;</a></span>commSetCuffInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commSetCuffInputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function send reference inputs to a board connected to the serial port. Is used only when the device is a Cuff.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">flag</td><td>A flag that indicates used to activate the cuff driving functionality of the board.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       cuff_inputs[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> flag = 1;</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a342c0b970a9a2a661c3d5636a7601a01">commSetCuffInputs</a>(&amp;comm_settings_t, device_id, flag);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a894f6f9ec9822112ff3c7eef10d123c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a894f6f9ec9822112ff3c7eef10d123c9">&#9670;&nbsp;</a></span>commSetInputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commSetInputs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>inputs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function send reference inputs to a board connected to the serial port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">inputs</td><td>Input references.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       inputs[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line">inputs[0]   = 1000;</div><div class="line">inputs[1]   = -1000;</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a894f6f9ec9822112ff3c7eef10d123c9">commSetInputs</a>(&amp;comm_settings_t, device_id, inputs);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="aa3aee192f28b08cf6d80fc719e73ad46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3aee192f28b08cf6d80fc719e73ad46">&#9670;&nbsp;</a></span>commSetPosStiff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commSetPosStiff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>inputs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function send reference inputs to a board connected to the serial port. The reference is in shaft position and stiffness preset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">inputs</td><td>Input references.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       inputs[2];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line">inputs[0]   = 100;          <span class="comment">//Degrees</span></div><div class="line">inputs[1]   = 30;           <span class="comment">//stiffness preset</span></div><div class="line"><a class="code" href="qbmove__communications_8h.html#aa3aee192f28b08cf6d80fc719e73ad46">commSetPosStiff</a>(&amp;comm_settings_t, device_id, inputs);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a69b4f92e4ef6b8cfef5d0c34fd4993db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69b4f92e4ef6b8cfef5d0c34fd4993db">&#9670;&nbsp;</a></span>commSetWatchDog()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void commSetWatchDog </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short int&#160;</td>
          <td class="paramname"><em>wdt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets watchdog timer of a board.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">wdt</td><td>Watchdog timer in [csec], max value: 500 [cs] / min value: 0 (disable) [cs]</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       wdt = 60;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128);</span></div><div class="line"><span class="stringliteral">commSetWatchDog(&amp;comm_settings_t, global_args.device_id, wdt);</span></div><div class="line"><span class="stringliteral">closeRS485(&amp;comm_settings_t);</span></div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a95fbe9919cbe89dc444e333edad6642e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95fbe9919cbe89dc444e333edad6642e">&#9670;&nbsp;</a></span>commSetZeros()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commSetZeros </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>num_of_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function sets the encoders's zero positon value that remains stored in the board memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">value</td><td>An array with the encoder readings values. </td></tr>
    <tr><td class="paramname">num_of_values</td><td>The size of the values array, equal to the sensor number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">short</span> <span class="keywordtype">int</span>       measurements[3];</div><div class="line"></div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a06a73f0c93c7ae12a95541c1feee10b7">commGetMeasurements</a>(comm_settings_t, device_id, measurements)</div><div class="line"><span class="keywordflow">for</span>(i = 0; i&lt;3; i++)</div><div class="line">    measurements[i] = -measurements[i];</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a95fbe9919cbe89dc444e333edad6642e">commSetZeros</a>(&amp;comm_settings_t, global_args.device_id, measurements, 3);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af49ed4d474529ec3a53e37f5f85c1e7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af49ed4d474529ec3a53e37f5f85c1e7b">&#9670;&nbsp;</a></span>commStoreDefaultParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commStoreDefaultParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function stores the factory default parameters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#af49ed4d474529ec3a53e37f5f85c1e7b">commStoreDefaultParams</a>(&amp;comm_settings_t, device_id)</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="ad3359fdac0ba857804dfc4a9bc761b20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3359fdac0ba857804dfc4a9bc761b20">&#9670;&nbsp;</a></span>commStoreParams()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int commStoreParams </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function stores all parameters that were set in the board memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a> comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>     device_id = 65;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#ad3359fdac0ba857804dfc4a9bc761b20">commStoreParams</a>(&amp;comm_settings_t, device_id)</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="adce66aac7dbbd52de59bb7a3a9c1b3bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adce66aac7dbbd52de59bb7a3a9c1b3bd">&#9670;&nbsp;</a></span>openRS485()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void openRS485 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port_s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>BAUD_RATE</em> = <code>B2000000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to open a serial port for using with the board.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname"><a class="el" href="structcomm__settings.html">comm_settings</a></td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings. </td></tr>
    <tr><td class="paramname">port_s</td><td>The string to the serial port path. </td></tr>
    <tr><td class="paramname">BAUD_RATE</td><td>The default baud rate value of the serial port</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the file descriptor associated to the serial port.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><span class="keywordflow">if</span>(comm_settings_t.file_handle == INVALID_HANDLE_VALUE)</div><div class="line">{</div><div class="line"><span class="comment">// ERROR</span></div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a65b0719c48b487b5e7432f794e3fec1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65b0719c48b487b5e7432f794e3fec1b">&#9670;&nbsp;</a></span>RS485GetInfo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RS485GetInfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to ping the serial port for a board and to get information about the device. ONLY USE WHEN ONE DEVICE IS CONNECTED ONLY.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">buffer</td><td>Buffer that stores a string with information about the device. BUFFER SIZE MUST BE AT LEAST 500.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>    comm_settings_t;</div><div class="line"><span class="keywordtype">char</span>             auxstring[500];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t,<span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a65b0719c48b487b5e7432f794e3fec1b">RS485GetInfo</a>(&amp;comm_settings_t, auxstring);</div><div class="line">puts(auxstring);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="af5bf8448818684348d30d03d59fc2c1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5bf8448818684348d30d03d59fc2c1b">&#9670;&nbsp;</a></span>RS485ListDevices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RS485ListDevices </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>list_of_ids</em>[255]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to list the number of devices connected to the serial port and get their relative IDs</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">list_of_ids[255]</td><td>Buffer that stores a list of IDs to ping, in order to see which of those IDs is connected. Is then filled with the IDs connected to the serial port.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of devices connected</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65; </div><div class="line"><span class="keywordtype">int</span>             device_num;</div><div class="line"><span class="keywordtype">char</span>            list_of_ids[255];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t, device_id);</div><div class="line">device_num = <a class="code" href="qbmove__communications_8h.html#af5bf8448818684348d30d03d59fc2c1b">RS485ListDevices</a>(&amp;comm_settings_t, &amp;list_of_ids);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div><div class="line">printf(<span class="stringliteral">&quot;Number of devices connected: %d&quot;</span>, i);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a7c103994cbd730d3e8fc84328ee09fd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c103994cbd730d3e8fc84328ee09fd5">&#9670;&nbsp;</a></span>RS485listPorts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RS485listPorts </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>list_of_ports</em>[60][255]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to return a list of available serial ports. A maximum of 10 ports are found.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list_of_ports</td><td>An array of strings with the serial ports paths.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number of serial ports found.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keywordtype">int</span>     i, num_ports;</div><div class="line"><span class="keywordtype">char</span>    list_of_ports[10][255];</div><div class="line"></div><div class="line">num_ports = <a class="code" href="qbmove__communications_8h.html#a7c103994cbd730d3e8fc84328ee09fd5">RS485listPorts</a>(ports);</div><div class="line"></div><div class="line"><span class="keywordflow">for</span>(i = 0; i &lt; num_ports; ++i)</div><div class="line">{</div><div class="line">    puts(ports[i]);</div><div class="line">}</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a8c7444a05d655538cb7d13ee47290c8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c7444a05d655538cb7d13ee47290c8d">&#9670;&nbsp;</a></span>RS485read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int RS485read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomm__settings.html">comm_settings</a> *&#160;</td>
          <td class="paramname"><em>comm_settings_t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>package</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to read a package from the device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">comm_settings_t</td><td>A <em><a class="el" href="structcomm__settings.html">comm_settings</a></em> structure containing info about the communication settings.</td></tr>
    <tr><td class="paramname">id</td><td>The device's id number. </td></tr>
    <tr><td class="paramname">package</td><td>Package will be stored here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns package length if communication was ok, -1 otherwise.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><a class="code" href="structcomm__settings.html">comm_settings</a>   comm_settings_t;</div><div class="line"><span class="keywordtype">int</span>             device_id = 65;</div><div class="line"><span class="keywordtype">char</span>            data_read[1000];</div><div class="line"></div><div class="line"><a class="code" href="qbmove__communications_8h.html#adce66aac7dbbd52de59bb7a3a9c1b3bd">openRS485</a>(&amp;comm_settings_t, <span class="stringliteral">&quot;/dev/tty.usbserial-128&quot;</span>);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a7f95a0e23b674b1fe32b8e35f0e36863">commPing</a>(&amp;comm_settings_t, device_id);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a8c7444a05d655538cb7d13ee47290c8d">RS485read</a>(&amp;comm_settings_t, device_id, data_read);</div><div class="line"><a class="code" href="qbmove__communications_8h.html#a5f87643fab51e02e4eab71bf4ab1a33a">closeRS485</a>(&amp;comm_settings_t);</div><div class="line"></div><div class="line">printf(data_read);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
<a id="a97912dd3b3c6529884b0e61a2ca6a31b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97912dd3b3c6529884b0e61a2ca6a31b">&#9670;&nbsp;</a></span>timevaldiff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long timevaldiff </td>
          <td>(</td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>starttime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>finishtime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions returns a difference between two timeval structures in order to obtain time elapsed between the two timeval;</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">starttime</td><td>The timeval structure containing the start time </td></tr>
    <tr><td class="paramname">finishtime</td><td>The timeval structure containing the finish time</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the elapsed time between the two timeval structures.</dd></dl>
<dl class="section user"><dt>Example</dt><dd><div class="fragment"><div class="line"><span class="keyword">struct </span>timeval start, finish;</div><div class="line">gettimeofday(&amp;start, NULL);</div><div class="line"><span class="comment">// other instructions </span></div><div class="line">gettimeofday(&amp;now, NULL);</div><div class="line"><span class="keywordtype">long</span> diff = <a class="code" href="qbmove__communications_8h.html#a97912dd3b3c6529884b0e61a2ca6a31b">timevaldiff</a>(&amp;start, &amp;now);</div><div class="line"></div><div class="line">printf(Time elapsed: %ld, diff);</div></div><!-- fragment --> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
